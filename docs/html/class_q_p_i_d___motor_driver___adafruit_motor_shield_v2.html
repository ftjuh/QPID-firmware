<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QPIDfirmware: QPID_MotorDriver_AdafruitMotorShieldV2 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cupid_64p.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QPIDfirmware
   &#160;<span id="projectnumber">v0.1</span>
   </div>
   <div id="projectbrief">Object oriented firmware for autonomous motor drivers with encoder based PID controller and flexible interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">QPID_MotorDriver_AdafruitMotorShieldV2 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>(derived from <a class="el" href="class_q_p_i_d___motor_driver.html" title="Mostly abstract class that defines access methods and features for generic motors,...">QPID_MotorDriver</a>) Implement a <a class="el" href="class_q_p_i_d___motor_driver.html" title="Mostly abstract class that defines access methods and features for generic motors,...">QPID_MotorDriver</a> for DC motors hooked up to Adafruit's MotorShield V2. Control of this shield is via I2C, so it might be less responsive than other motor drivers using direct pin control.  
 <a href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_q_p_i_d___motor_driver___adafruit_motor_shield_v2_8h_source.html">QPID_MotorDriver_AdafruitMotorShieldV2.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for QPID_MotorDriver_AdafruitMotorShieldV2:</div>
<div class="dyncontent">
<div class="center"><img src="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2__inherit__graph.png" border="0" usemap="#_q_p_i_d___motor_driver___adafruit_motor_shield_v2_inherit__map" alt="Inheritance graph"/></div>
<map name="_q_p_i_d___motor_driver___adafruit_motor_shield_v2_inherit__map" id="_q_p_i_d___motor_driver___adafruit_motor_shield_v2_inherit__map">
<area shape="rect" title="(derived from QPID_MotorDriver) Implement a QPID_MotorDriver for DC motors hooked up to Adafruit&#39;s Mo..." alt="" coords="5,155,188,196"/>
<area shape="rect" href="class_q_p_i_d___motor_driver.html" title="Mostly abstract class that defines access methods and features for generic motors,..." alt="" coords="31,80,162,107"/>
<area shape="rect" href="class_q_p_i_d___object.html" title="Base class for all QPID classes. Establishes interface for message processing and provides error repo..." alt="" coords="47,5,147,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac18442f24a6c623053c8285186676874"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#ac18442f24a6c623053c8285186676874">setPower</a> (int16_t pow) override</td></tr>
<tr class="memdesc:ac18442f24a6c623053c8285186676874"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start motor with given power and direction.  <a href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#ac18442f24a6c623053c8285186676874">More...</a><br /></td></tr>
<tr class="separator:ac18442f24a6c623053c8285186676874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bf9ad1200a1e268670b76277988fc10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a6bf9ad1200a1e268670b76277988fc10">coast</a> (void) override</td></tr>
<tr class="memdesc:a6bf9ad1200a1e268670b76277988fc10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop motor in fast decay mode by cutting power to it.  <a href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a6bf9ad1200a1e268670b76277988fc10">More...</a><br /></td></tr>
<tr class="separator:a6bf9ad1200a1e268670b76277988fc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c2ce2c835d2997e47e24c225c5a19ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a7c2ce2c835d2997e47e24c225c5a19ca">brake</a> (void) override</td></tr>
<tr class="memdesc:a7c2ce2c835d2997e47e24c225c5a19ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">The AdafruitMotorShieldV2 provides no braking, so <a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a7c2ce2c835d2997e47e24c225c5a19ca" title="The AdafruitMotorShieldV2 provides no braking, so brake() and coast() are the same.">brake()</a> and <a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a6bf9ad1200a1e268670b76277988fc10" title="Stop motor in fast decay mode by cutting power to it.">coast()</a> are the same.  <a href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a7c2ce2c835d2997e47e24c225c5a19ca">More...</a><br /></td></tr>
<tr class="separator:a7c2ce2c835d2997e47e24c225c5a19ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7f9cbfd92eb2a0bf74c9688e7faa73e"><td class="memItemLeft" align="right" valign="top"><a id="ac7f9cbfd92eb2a0bf74c9688e7faa73e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#ac7f9cbfd92eb2a0bf74c9688e7faa73e">setDecay</a> (<a class="el" href="class_q_p_i_d___motor_driver.html#a1acf40a73af730e7a14b51ea0bc3ea52">decayModeType</a> mode) override</td></tr>
<tr class="memdesc:ac7f9cbfd92eb2a0bf74c9688e7faa73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does nothing. Not supported by AdafruitMotorShieldV2. <br /></td></tr>
<tr class="separator:ac7f9cbfd92eb2a0bf74c9688e7faa73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab41d47dfdcf7bd824719c6a0afd7d03"><td class="memItemLeft" align="right" valign="top"><a id="aab41d47dfdcf7bd824719c6a0afd7d03"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#aab41d47dfdcf7bd824719c6a0afd7d03">setFrequency</a> (uint8_t onoff) override</td></tr>
<tr class="memdesc:aab41d47dfdcf7bd824719c6a0afd7d03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does nothing. Though the AdafruitMotorShieldV2 library has a public function for setting PWM, the documentation says it's internal only. So you'll have to use <a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#ae89ffd9462cfe24e1b852d0d38c2ead7" title="Get and initialize motor. As the shield is a I2C slave, devices with more than one hardware I2C bus (...">init()</a> to set the PWM frequency. <br /></td></tr>
<tr class="separator:aab41d47dfdcf7bd824719c6a0afd7d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe007979fe9a531e607bdc039baaf57"><td class="memItemLeft" align="right" valign="top"><a id="a3fe007979fe9a531e607bdc039baaf57"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a3fe007979fe9a531e607bdc039baaf57">enable</a> (void) override</td></tr>
<tr class="memdesc:a3fe007979fe9a531e607bdc039baaf57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does nothing. Not supported by AdafruitMotorShieldV2. <br /></td></tr>
<tr class="separator:a3fe007979fe9a531e607bdc039baaf57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a915bbf47171f6ff4b8c08197c210a23e"><td class="memItemLeft" align="right" valign="top"><a id="a915bbf47171f6ff4b8c08197c210a23e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a915bbf47171f6ff4b8c08197c210a23e">disable</a> (void) override</td></tr>
<tr class="memdesc:a915bbf47171f6ff4b8c08197c210a23e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does nothing. Not supported by AdafruitMotorShieldV2. <br /></td></tr>
<tr class="separator:a915bbf47171f6ff4b8c08197c210a23e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280030d79d83be16fce073ee84ca3cf4"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a280030d79d83be16fce073ee84ca3cf4">hasFault</a> () override</td></tr>
<tr class="memdesc:a280030d79d83be16fce073ee84ca3cf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Not supported by AdafruitMotorShieldV2.  <a href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a280030d79d83be16fce073ee84ca3cf4">More...</a><br /></td></tr>
<tr class="separator:a280030d79d83be16fce073ee84ca3cf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae89ffd9462cfe24e1b852d0d38c2ead7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#ae89ffd9462cfe24e1b852d0d38c2ead7">init</a> (uint8_t motorNum, uint16_t freq, int8_t i2cAddress, int8_t i2cBus, int8_t sda, int8_t scl)</td></tr>
<tr class="memdesc:ae89ffd9462cfe24e1b852d0d38c2ead7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get and initialize motor. As the shield is a I2C slave, devices with more than one hardware I2C bus (e.g. ESP32) can use a different bus to be able to act as I2C slave on the other bus.  <a href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#ae89ffd9462cfe24e1b852d0d38c2ead7">More...</a><br /></td></tr>
<tr class="separator:ae89ffd9462cfe24e1b852d0d38c2ead7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_q_p_i_d___object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_q_p_i_d___object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_q_p_i_d___object.html">QPID_Object</a></td></tr>
<tr class="memitem:afb9f73c12fa9142887ddd91874cc4668 inherit pub_methods_class_q_p_i_d___object"><td class="memItemLeft" align="right" valign="top"><a id="afb9f73c12fa9142887ddd91874cc4668"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___object.html#afb9f73c12fa9142887ddd91874cc4668">update</a> ()</td></tr>
<tr class="memdesc:afb9f73c12fa9142887ddd91874cc4668 inherit pub_methods_class_q_p_i_d___object"><td class="mdescLeft">&#160;</td><td class="mdescRight">(abstract) Can be overridden by QPID subsystems which need to do their own polling. Will be called by <a class="el" href="class_q_p_i_d___unit.html#aadbecce3e6e4cd2203613241b83284e6" title="Main activity loop. Updates speed measurement, PIDs etc. Call this as often as possible,...">QPID_Unit::update()</a> for subsystems, and by firmware/client for <a class="el" href="class_q_p_i_d___unit.html" title="A QPID_Unit objects bundles access to three hardware components, a motor driver, an position encoder,...">QPID_Unit</a> itself. <br /></td></tr>
<tr class="separator:afb9f73c12fa9142887ddd91874cc4668 inherit pub_methods_class_q_p_i_d___object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7914c48c69bc8f2a1a536ea0882fe71 inherit pub_methods_class_q_p_i_d___object"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___object.html#ab7914c48c69bc8f2a1a536ea0882fe71">throwError</a> (const char *invokedBy, const char *errorMessage)</td></tr>
<tr class="memdesc:ab7914c48c69bc8f2a1a536ea0882fe71 inherit pub_methods_class_q_p_i_d___object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes error message and error invoking class to Serial.  <a href="class_q_p_i_d___object.html#ab7914c48c69bc8f2a1a536ea0882fe71">More...</a><br /></td></tr>
<tr class="separator:ab7914c48c69bc8f2a1a536ea0882fe71 inherit pub_methods_class_q_p_i_d___object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f886d050464d824933977f15f39f58 inherit pub_methods_class_q_p_i_d___object"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___object.html#af8f886d050464d824933977f15f39f58">log</a> (const char *logEntry)</td></tr>
<tr class="memdesc:af8f886d050464d824933977f15f39f58 inherit pub_methods_class_q_p_i_d___object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts timestamped string into the system log (atm: writes it out to Serial).  <a href="class_q_p_i_d___object.html#af8f886d050464d824933977f15f39f58">More...</a><br /></td></tr>
<tr class="separator:af8f886d050464d824933977f15f39f58 inherit pub_methods_class_q_p_i_d___object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9e809df6c1b56a8f69280942414efe2b"><td class="memItemLeft" align="right" valign="top"><a id="a9e809df6c1b56a8f69280942414efe2b"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a9e809df6c1b56a8f69280942414efe2b">processMessage</a> (uint8_t *m) override</td></tr>
<tr class="memdesc:a9e809df6c1b56a8f69280942414efe2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">(abstract) Interprets message handed down from <a class="el" href="class_q_p_i_d___unit.html" title="A QPID_Unit objects bundles access to three hardware components, a motor driver, an position encoder,...">QPID_Unit</a> locally. Must be overridden in derived classes <br /></td></tr>
<tr class="separator:a9e809df6c1b56a8f69280942414efe2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_q_p_i_d___object"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_q_p_i_d___object')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_q_p_i_d___object.html">QPID_Object</a></td></tr>
<tr class="memitem:aa75f813f6d8e3d30e93f711746f8df47 inherit pro_methods_class_q_p_i_d___object"><td class="memItemLeft" align="right" valign="top"><a id="aa75f813f6d8e3d30e93f711746f8df47"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___object.html#aa75f813f6d8e3d30e93f711746f8df47">QPID_Object</a> ()</td></tr>
<tr class="memdesc:aa75f813f6d8e3d30e93f711746f8df47 inherit pro_methods_class_q_p_i_d___object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. Begins Serial with 115200 baud for logging and error reporting, if not done previously. <br /></td></tr>
<tr class="separator:aa75f813f6d8e3d30e93f711746f8df47 inherit pro_methods_class_q_p_i_d___object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_class_q_p_i_d___motor_driver"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_q_p_i_d___motor_driver')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_q_p_i_d___motor_driver.html">QPID_MotorDriver</a></td></tr>
<tr class="memitem:a1acf40a73af730e7a14b51ea0bc3ea52 inherit pub_types_class_q_p_i_d___motor_driver"><td class="memItemLeft" align="right" valign="top"><a id="a1acf40a73af730e7a14b51ea0bc3ea52"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_i_d___motor_driver.html#a1acf40a73af730e7a14b51ea0bc3ea52">decayModeType</a> : uint8_t { <b>decayModeFast</b> = 0, 
<b>decayModeSlow</b> = 1
 }</td></tr>
<tr class="memdesc:a1acf40a73af730e7a14b51ea0bc3ea52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Symbolic names for decay modes that should be used during inactive part of PWM phase, if the driver supports that functionality. <br /></td></tr>
<tr class="separator:a1acf40a73af730e7a14b51ea0bc3ea52 inherit pub_types_class_q_p_i_d___motor_driver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_class_q_p_i_d___motor_driver"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_q_p_i_d___motor_driver')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_q_p_i_d___motor_driver.html">QPID_MotorDriver</a></td></tr>
<tr class="memitem:af3672aaff1425910780e24a5354d9d04 inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memItemLeft" align="right" valign="top"><a id="af3672aaff1425910780e24a5354d9d04"></a>
<a class="el" href="class_q_p_i_d___motor_driver.html#a1acf40a73af730e7a14b51ea0bc3ea52">decayModeType</a>&#160;</td><td class="memItemRight" valign="bottom"><b>decayMode</b> = decayModeSlow</td></tr>
<tr class="separator:af3672aaff1425910780e24a5354d9d04 inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d20f946c1e780074b3a4a974613493c inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memItemLeft" align="right" valign="top"><a id="a8d20f946c1e780074b3a4a974613493c"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>currentPWM</b> = 0</td></tr>
<tr class="separator:a8d20f946c1e780074b3a4a974613493c inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c4705c4f9cc935b04df53d7282257d inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memItemLeft" align="right" valign="top"><a id="ab9c4705c4f9cc935b04df53d7282257d"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>maxPower</b></td></tr>
<tr class="separator:ab9c4705c4f9cc935b04df53d7282257d inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33be89e36a5ed29fb9096fc3cb8421da inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memItemLeft" align="right" valign="top"><a id="a33be89e36a5ed29fb9096fc3cb8421da"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>alwaysOnPWM</b></td></tr>
<tr class="separator:a33be89e36a5ed29fb9096fc3cb8421da inherit pro_attribs_class_q_p_i_d___motor_driver"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>(derived from <a class="el" href="class_q_p_i_d___motor_driver.html" title="Mostly abstract class that defines access methods and features for generic motors,...">QPID_MotorDriver</a>) Implement a <a class="el" href="class_q_p_i_d___motor_driver.html" title="Mostly abstract class that defines access methods and features for generic motors,...">QPID_MotorDriver</a> for DC motors hooked up to Adafruit's MotorShield V2. Control of this shield is via I2C, so it might be less responsive than other motor drivers using direct pin control. </p>
<dl class="section note"><dt>Note</dt><dd>The shield does provide neither sleep/enable, decay mode, nor fault signaling, so none of them are implemented here. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd><p class="startdd">mostly untested yet. </p>
<p class="interdd">Access to the master I2C bus should be regulated, in case other subsystems use I2C too (e.g. endstops on an I2C extender). So, for the moment, watch out for possible problems yourself. </p>
<p class="enddd">(done?) Can only use the system's default I2C bus (Wire). The library supports providing your own Wire interfaces which would make it possible to use an alternate bus, e.g. if the default bis is used for slave access to the device. </p>
</dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac18442f24a6c623053c8285186676874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac18442f24a6c623053c8285186676874">&#9670;&nbsp;</a></span>setPower()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QPID_MotorDriver_AdafruitMotorShieldV2::setPower </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>pow</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start motor with given power and direction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pow</td><td>PWM value, sign indicates direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Preferably use <a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a7c2ce2c835d2997e47e24c225c5a19ca" title="The AdafruitMotorShieldV2 provides no braking, so brake() and coast() are the same.">brake()</a> or <a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a6bf9ad1200a1e268670b76277988fc10" title="Stop motor in fast decay mode by cutting power to it.">coast()</a> instead of setPower(0) to stop. </dd></dl>

<p>Reimplemented from <a class="el" href="class_q_p_i_d___motor_driver.html#a2ddcf9dbccba3a42919c269b8ffd0abf">QPID_MotorDriver</a>.</p>

</div>
</div>
<a id="a6bf9ad1200a1e268670b76277988fc10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bf9ad1200a1e268670b76277988fc10">&#9670;&nbsp;</a></span>coast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QPID_MotorDriver_AdafruitMotorShieldV2::coast </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stop motor in fast decay mode by cutting power to it. </p>
<dl class="section note"><dt>Note</dt><dd>AdafruitMotorShieldV2 only supports coasting, no breaking. </dd></dl>

<p>Reimplemented from <a class="el" href="class_q_p_i_d___motor_driver.html#ad1b4c9fa92814d13eec1d24254d5db4e">QPID_MotorDriver</a>.</p>

</div>
</div>
<a id="a7c2ce2c835d2997e47e24c225c5a19ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c2ce2c835d2997e47e24c225c5a19ca">&#9670;&nbsp;</a></span>brake()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QPID_MotorDriver_AdafruitMotorShieldV2::brake </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The AdafruitMotorShieldV2 provides no braking, so <a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a7c2ce2c835d2997e47e24c225c5a19ca" title="The AdafruitMotorShieldV2 provides no braking, so brake() and coast() are the same.">brake()</a> and <a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a6bf9ad1200a1e268670b76277988fc10" title="Stop motor in fast decay mode by cutting power to it.">coast()</a> are the same. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html#a6bf9ad1200a1e268670b76277988fc10" title="Stop motor in fast decay mode by cutting power to it.">coast()</a> </dd></dl>

<p>Reimplemented from <a class="el" href="class_q_p_i_d___motor_driver.html#a9fe20c3d60ab8a53032c60b9aaf12392">QPID_MotorDriver</a>.</p>

</div>
</div>
<a id="a280030d79d83be16fce073ee84ca3cf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280030d79d83be16fce073ee84ca3cf4">&#9670;&nbsp;</a></span>hasFault()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int8_t QPID_MotorDriver_AdafruitMotorShieldV2::hasFault </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Not supported by AdafruitMotorShieldV2. </p>
<dl class="section return"><dt>Returns</dt><dd>alway false (no fault) </dd></dl>

<p>Reimplemented from <a class="el" href="class_q_p_i_d___motor_driver.html#a20ae58461cfac30fdcbf8e2ee20b1507">QPID_MotorDriver</a>.</p>

</div>
</div>
<a id="ae89ffd9462cfe24e1b852d0d38c2ead7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae89ffd9462cfe24e1b852d0d38c2ead7">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QPID_MotorDriver_AdafruitMotorShieldV2::init </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>motorNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>freq</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>i2cAddress</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>i2cBus</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>sda</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>scl</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get and initialize motor. As the shield is a I2C slave, devices with more than one hardware I2C bus (e.g. ESP32) can use a different bus to be able to act as I2C slave on the other bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorNum</td><td>Number of motor shield's motor output (1 to 4) </td></tr>
    <tr><td class="paramname">freq</td><td>PWM frequency. Use -1 for default (1600 Hz) </td></tr>
    <tr><td class="paramname">i2cAddress</td><td>I2C slave address of shield. Use -1 for default (0x60) </td></tr>
    <tr><td class="paramname">i2cBus</td><td>I2C Bus, for systems with more than one bus. Use -1 for default (wire library) </td></tr>
    <tr><td class="paramname">sda,scl</td><td>SDA and SCL pins. Only specify if i2cBus is non default. Use -1 for default in both cases. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_q_p_i_d___motor_driver___adafruit_motor_shield_v2_8h_source.html">QPID_MotorDriver_AdafruitMotorShieldV2.h</a></li>
<li><a class="el" href="_q_p_i_d___motor_driver___adafruit_motor_shield_v2_8cpp.html">QPID_MotorDriver_AdafruitMotorShieldV2.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_q_p_i_d___motor_driver___adafruit_motor_shield_v2.html">QPID_MotorDriver_AdafruitMotorShieldV2</a></li>
    <li class="footer">Generated on Sun May 23 2021 20:20:20 for QPIDfirmware by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
